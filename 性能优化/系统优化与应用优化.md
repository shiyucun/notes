
# 系统优化与应用优化

[linux性能调优指南](https://www.bookstack.cn/books/transoflptg)

- [系统优化与应用优化](#系统优化与应用优化)
  - [系统优化](#系统优化)
    - [CPU 绑定](#cpu-绑定)
    - [CPU 独占](#cpu-独占)
    - [优先级调整](#优先级调整)
    - [为进程设置资源限制](#为进程设置资源限制)
    - [NUMA(非一致内存访问)](#numa非一致内存访问)
    - [中断负载均衡](#中断负载均衡)
  - [应用优化](#应用优化)
    - [编译器优化](#编译器优化)
    - [算法优化](#算法优化)
    - [异步处理](#异步处理)
    - [多线程代替多进程](#多线程代替多进程)
    - [缓存](#缓存)

## 系统优化

### CPU 绑定

把进程绑定到一个或多个 CPU 上，提高缓存命中率，减少调度带来的上下文切换问题。

### CPU 独占

与 CPU 绑定类似，进一步将 CPU 分组，CPU 由指定的进程独占。

### 优先级调整

调整进程优先级，适当降低非核心应用的优先级，增高核心应用的优先级，确保核心应用得到优先处理。

### 为进程设置资源限制

为进程设置系统资源的上限，防止由于应用资深原因耗尽系统资源。

### NUMA(非一致内存访问)

支持 NUMA 的处理器划分多个 node，每个 node 有自己的内存空间，尽可能让 CPU 只访问本地内存。

### 中断负载均衡

无论软中断还是硬中断，中断处理程序都可能耗费大量 CPU。

开启 irqbalance 或配置 smp_affinity，可以把中断处理过程自动负载均衡到多个 CPU 上。

## 应用优化

### 编译器优化

编译器已经提供自动优化选项，开启后会自动对代码进行优化处理。

### 算法优化

使用复杂度低的算法。

### 异步处理

使用异步处理避免程序因为等待某个资源而一直阻塞，从而提升并发处理能力。

### 多线程代替多进程

多线程相对于多进程占用资源少，上下文切换不切换地址空间，因此线程切换成本更低。

### 缓存

经常访问的数据放到内存中缓存起来，下次访问时直接从内存中获取，加快处理速度。
