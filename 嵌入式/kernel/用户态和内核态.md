
# 用户态和内核态

- [用户态和内核态](#用户态和内核态)
  - [用户态特性](#用户态特性)
  - [内核态特性](#内核态特性)

## 用户态特性

1. 包含软件应用程序和相关库
2. 不能直接访问内核空间地址、代码、数据
3. 不能直接访问硬件信息
4. 访问内核必须利用系统调用
5. 用户态软件运行时CPU工作模式为USR模式
6. 虚拟地址空间 0x00000000-0xBFFFFFFF(前3G)
7. 每个用户进程的3G都是独立的

## 内核态特性

1. 包含设备驱动、网络协议栈、文件系统、内存管理、进程管理等
2. 可以访问硬件
3. 内核软件运行时，CPU工作在SVC模式
4. 虚拟地址空间 0xC0000000-0xFFFFFFFF(后1G)
5. 每个进程共享后1G虚拟地址空间
6. 进程由用户空间切换到内核空间，内核重新分配对应的栈(内核栈)，大小为8K
7. 进程由用户空间切换到内核空间，利用系统调用，本质上其实就是CPU工作模式的切换，权限的切换
8. CPU由USR模式切换到SVC模式通过软中断

空间划分的本质要依赖CPU的工作模式，本质目的就是实现操作系统的自我保护。
